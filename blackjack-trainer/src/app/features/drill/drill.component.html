<mat-card *ngIf="playerCards.length">
  <h2>Drill</h2>
  <div class="table">
    <div class="dealer">
      <h3>Dealer</h3>
      <div class="cards">
        <div class="card" *ngFor="let c of dealerCards" [attr.data-rank]="c.rank" [attr.data-suit]="c.suit">{{cardFace(c)}}</div>
      </div>
    </div>
    <div class="player">
      <h3>Player</h3>
      <div class="cards">
        <div class="card" *ngFor="let c of playerCards" [attr.data-rank]="c.rank" [attr.data-suit]="c.suit">{{cardFace(c)}}</div>
      </div>
    </div>
  </div>
  <p class="hand-desc">Hand: {{descPlayer()}} | Dealer Up: {{dealerLabel(dealerCards[0].value)}}</p>
  <div class="buttons" role="group" aria-label="Player action choices" aria-describedby="drill-shortcuts-desc">
    <button mat-raised-button color="primary" *ngFor="let a of actions; let i = index" (click)="answer(a)" [attr.aria-label]="'Choose '+a" [attr.autofocus]="i===0?true:null">{{a}}</button>
    <button mat-stroked-button type="button" (click)="showHint()" [disabled]="!!hint || awaitingNext" aria-label="Show chart hint" class="hint-btn">Hint</button>
  </div>
  <p id="drill-shortcuts-desc" class="vh">Keyboard shortcuts: H=Hit, S=Stand, D=Double, P=Split, R=Surrender. Use Tab to reach buttons then press Enter/Space.</p>
  <p *ngIf="hint && !explanation" class="hint-text" aria-live="polite">{{hint}}</p>
  <p *ngIf="feedback" role="status" [class.correct]="feedback.correct" [class.incorrect]="!feedback.correct" aria-live="polite">{{feedback.message}}</p>
  <p>Score: {{correct}} / {{attempts}}</p>
  <div *ngIf="explanation" class="explanation" aria-live="polite">
    <h4>Explanation:</h4>
    <p>{{explanation}}</p>
    <div class="next-wrapper" *ngIf="awaitingNext">
      <button mat-stroked-button color="accent" (click)="next()" aria-label="Go to next drill" autofocus>Next</button>
      <small class="hint">Press Enter or Space when focused. Shortcuts: H,S,D,P,R to answer.</small>
    </div>
  </div>
</mat-card>
